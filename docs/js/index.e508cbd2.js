(function(t){function e(e){for(var r,s,i=e[0],l=e[1],c=e[2],u=0,p=[];u<i.length;u++)s=i[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);d&&d(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],r=!0,i=1;i<a.length;i++){var l=a[i];0!==o[l]&&(r=!1)}r&&(n.splice(e--,1),t=s(s.s=a[0]))}return t}var r={},o={index:0},n=[];function s(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=r,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(a,r,function(e){return t[e]}.bind(null,r));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var d=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"492c":function(t,e,a){"use strict";a("a7b7")},a7b7:function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{staticClass:"px-4",attrs:{color:"primary",dark:"",extended:"",flat:"",absolute:""}},[a("v-icon",{staticClass:"mr-4"},[t._v("mdi-dns-outline")]),a("v-toolbar-title",[a("strong",[t._v("Visualizador de análise de tráfego DNS")]),t._v(" · RIPE Atlas ")]),a("v-spacer"),a("v-btn",[t._v(" Código Fonte "),a("v-icon",{attrs:{right:""}},[t._v("mdi-github")])],1)],1),a("v-card",{staticClass:"main-card mx-auto",attrs:{"max-width":"900",width:"100%"}},[a("v-tabs",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-tab",t._g({},r),[a("v-icon",[t._v("mdi-cloud-upload")])],1)]}}])},[t._v(" Faça upload do resultado da medição (JSON) ")]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-tab",t._g({},r),[a("v-icon",[t._v("mdi-magnify")])],1)]}}])},[t._v(" Busque uma medição através de um ID ")])],1),a("v-divider"),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",[a("v-card-text",[a("app-uploader",{on:{load:t.onLoad,unload:t.onUnload},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}})],1)],1),a("v-tab-item",[a("v-card-text",[a("app-fetcher",{on:{load:t.onLoad,unload:t.onUnload,progress:t.onProgress},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}})],1)],1)],1)],1),a("v-main",[a("v-container",{staticClass:"main-container",attrs:{"fill-height":""}},[a("v-fade-transition",{attrs:{mode:"out-in"}},[t.loading?a("v-row",[a("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[a("v-progress-circular",{attrs:{size:"100",color:"primary",indeterminate:""}},[a("small",[t._v(t._s(t.progressText))])])],1)],1):t.result&&t.result.length?a("app-summary",{attrs:{result:t.result}}):a("v-row",[a("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[a("v-icon",{staticClass:"mb-6",attrs:{"x-large":""}},[t._v("mdi-code-json")]),a("h2",[t._v("Selecione uma medição para visualizar.")])],1)],1)],1)],1)],1),a("v-footer",{attrs:{app:"",padless:""}},[a("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[a("span",[t._v(" Adrian Cerbaro · Universidade de Passo Fundo · 2021/2 ")]),t._v(" · "),a("a",{attrs:{href:"https://github.com/adrianbrs",target:"_blank"}},[t._v("GitHub")])])],1),a("v-snackbar",{attrs:{top:"",color:t.snackbarData.color},scopedSlots:t._u([{key:"action",fn:function(e){var r=e.attrs;return[a("v-btn",t._b({attrs:{text:""},on:{click:function(e){t.snackbarData.show=!1}}},"v-btn",r,!1),[t._v("Ok")])]}}]),model:{value:t.snackbarData.show,callback:function(e){t.$set(t.snackbarData,"show",e)},expression:"snackbarData.show"}},[t._v(" "+t._s(t.snackbarData.message)+" ")])],1)},n=[],s=a("d4ec"),i=a("bee2"),l=a("262e"),c=a("2caf"),d=(a("b0c0"),a("b680"),a("9ab4")),u=a("1b40"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex"},[a("v-file-input",{attrs:{label:"Medição (JSON)",placeholder:"Faça upload do resultado da medição em JSON","prepend-icon":"mdi-code-json",accept:"application/json",error:this.error,messages:this.error,disabled:t.uploading,success:t.uploaded,"hide-details":"auto",dense:"",outlined:""},on:{change:t.onChange},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({staticClass:"ml-2",attrs:{text:"",icon:"",loading:t.uploading,disabled:!t.file||t.uploading||t.uploaded},on:{click:function(e){return t.upload()}}},r),[a("v-icon",[t._v("mdi-upload")])],1)]}}])},[t._v(" Clique para enviar ")])],1)},v=[],m=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.file=null,t.error=null,t.uploaded=!1,t}return Object(i["a"])(a,[{key:"uploading",get:function(){return!!this.value},set:function(t){this.$emit("input",t)}},{key:"watchFile",value:function(t){t||this.$emit("unload"),this.uploaded=!1}},{key:"created",value:function(){var t=this;this.reader=new FileReader,this.reader.addEventListener("load",(function(e){return t.onLoad(e)})),this.reader.addEventListener("loadstart",(function(){t.uploading=!0})),this.reader.addEventListener("loadend",(function(){t.uploading=!1})),this.reader.addEventListener("abort",(function(){t.uploading=!1}))}},{key:"upload",value:function(){this.file&&this.reader.readAsText(this.file)}},{key:"success",value:function(t){this.$emit("load",t),this.uploaded=!0}},{key:"onChange",value:function(t){t||(this.error=null,this.uploaded=!1)}},{key:"onLoad",value:function(t){var e,a=null===(e=t.target)||void 0===e?void 0:e.result;if(a)try{var r=JSON.parse(a);this.success(r)}catch(o){console.error(o),this.error="O arquivo enviado não é um JSON válido."}else this.error="Algo deu errado no envio do arquivo, tente novamente."}}]),a}(u["e"]);Object(d["a"])([Object(u["c"])(Boolean)],m.prototype,"value",void 0),Object(d["a"])([Object(u["f"])("file")],m.prototype,"watchFile",null),m=Object(d["a"])([u["a"]],m);var f=m,b=f,h=a("2877"),g=a("6544"),k=a.n(g),y=a("8336"),_=a("23a7"),x=a("132d"),O=a("3a2f"),j=Object(h["a"])(b,p,v,!1,null,null,null),w=j.exports;k()(j,{VBtn:y["a"],VFileInput:_["a"],VIcon:x["a"],VTooltip:O["a"]});var V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"############",expression:"'############'"}],attrs:{label:"ID da medição",rules:t.rules,disabled:t.loading,placeholder:"00000","append-icon":"mdi-identifier","hide-details":"auto",outlined:""},model:{value:t.id,callback:function(e){t.id=e},expression:"id"}})],1),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-datetime-picker",{attrs:{label:"Data inicial",disabled:t.loading,"date-format":t.dateFormat,"time-format":t.timeFormat,"text-field-props":t.textProps,"date-picker-props":t.dateProps,"time-picker-props":t.timeProps},scopedSlots:t._u([{key:"dateIcon",fn:function(){return[a("v-icon",[t._v("mdi-calendar")])]},proxy:!0},{key:"timeIcon",fn:function(){return[a("v-icon",[t._v("mdi-clock-outline")])]},proxy:!0},{key:"actions",fn:function(e){var r=e.parent;return[a("v-btn",{attrs:{color:"success",text:""},on:{click:r.okHandler}},[t._v("Ok")])]}}]),model:{value:t.timeStart,callback:function(e){t.timeStart=e},expression:"timeStart"}})],1),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-datetime-picker",{attrs:{label:"Data final",disabled:t.loading,"date-format":t.dateFormat,"time-format":t.timeFormat,"text-field-props":t.textProps,"date-picker-props":t.dateProps,"time-picker-props":t.timeProps},scopedSlots:t._u([{key:"dateIcon",fn:function(){return[a("v-icon",[t._v("mdi-calendar")])]},proxy:!0},{key:"timeIcon",fn:function(){return[a("v-icon",[t._v("mdi-clock-outline")])]},proxy:!0},{key:"actions",fn:function(e){var r=e.parent;return[a("v-btn",{attrs:{color:"success",text:""},on:{click:r.okHandler}},[t._v("Ok")])]}}]),model:{value:t.timeEnd,callback:function(e){t.timeEnd=e},expression:"timeEnd"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-btn",{attrs:{color:t.loading?"red":"primary",block:"",disabled:!t.id||!t.timeStart||!t.timeEnd},on:{click:function(e){t.loading?t.cancel():t.search()}}},[t.loading?[a("v-progress-circular",{staticClass:"mr-2",attrs:{indeterminate:"",color:"white",size:"22",width:"2"}}),t._v(" Cancelar ")]:[a("v-icon",{attrs:{left:""}},[t._v("mdi-magnify")]),t._v(" Buscar ")]],2)],1)],1)},C=[],S=a("1da1"),P=(a("96cf"),a("d3b7"),a("bc3a")),B=a.n(P),D=a("5a0c"),E=a.n(D),F="https://atlas.ripe.net/api/v2/measurements",T=10,I=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.id=null,t.rules=[function(t){return!!t||"ID obrigatório"}],t.controller=new AbortController,t.dateFormat="dd/MM/yyyy",t.timeFormat="HH:mm:ss",t.dateProps={locale:"pt-BR"},t.timeProps={useSeconds:!0,format:"24hr"},t.textProps={appendIcon:"mdi-calendar-outline",outlined:!0,hideDetails:"auto"},t}return Object(i["a"])(a,[{key:"loading",get:function(){return!!this.value},set:function(t){this.$emit("input",t)}},{key:"created",value:function(){var t=E()(),e=t.add(30,"seconds");this.timeStart=t.toDate(),this.timeEnd=e.toDate()}},{key:"success",value:function(t){this.$emit("load",t)}},{key:"cancel",value:function(){this.controller.abort(),this.snackbar("Busca cancelada")}},{key:"search",value:function(){var t=Object(S["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.id&&this.timeStart&&this.timeEnd)){t.next=8;break}if(e=E()(this.timeStart).diff(this.timeEnd,"days"),!(e>T)){t.next=5;break}return this.snackbar("O limite máximo em dias é "+T,"error"),t.abrupt("return");case 5:return this.loading=!0,t.next=8,B.a.get("".concat(F,"/").concat(this.id,"/results"),{params:{start:this.timeStart,stop:this.timeEnd,format:"json"},signal:this.controller.signal,onDownloadProgress:function(t){a.$emit("progress",t.loaded)}}).then((function(t){a.success(t.data)})).catch((function(t){var e;"404"===String(null===(e=t.response)||void 0===e?void 0:e.status)&&a.snackbar("Medição não encontrada","error"),console.error(t,t.response.status)})).finally((function(){a.loading=!1}));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),a}(u["e"]);Object(d["a"])([Object(u["c"])(Boolean)],I.prototype,"value",void 0),Object(d["a"])([Object(u["b"])()],I.prototype,"snackbar",void 0),I=Object(d["a"])([u["a"]],I);var M=I,R=M,A=a("62ad"),$=a("490a"),L=a("0fd9"),N=a("8654"),J=Object(h["a"])(R,V,C,!1,null,null,null),H=J.exports;k()(J,{VBtn:y["a"],VCol:A["a"],VIcon:x["a"],VProgressCircular:$["a"],VRow:L["a"],VTextField:N["a"]});var U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-col",{attrs:{cols:"12"}},[t.loading?a("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"table-thead, divider, table-row"}}):a("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Entradas")]),a("th",{staticClass:"text-left"},[t._v("ID Medição")]),a("th",{staticClass:"text-left"},[t._v("Nome Medição")]),a("th",{staticClass:"text-left"},[t._v("End. Destino")]),a("th",{staticClass:"text-left"},[t._v("Porta Destino")]),a("th",{staticClass:"text-left"},[t._v("Tipo")])])]),a("tbody",[a("tr",[a("td",[t._v(t._s(t.result.length||"-"))]),a("td",[t._v(t._s(t.sample.msm_id||"-"))]),a("td",[t._v(t._s(t.sample.msm_name||"-"))]),a("td",[t._v(t._s(t.sample.dst_addr||"-"))]),a("td",[t._v(t._s(t.sample.dst_port||"-"))]),a("td",[t._v(t._s(t.sample.type||"-"))])])])]},proxy:!0}])})],1),a("v-col",{attrs:{cols:"12",lg:"4"}},[a("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"card"}})],1),a("v-col",{attrs:{cols:"12",lg:"4"}},[a("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"card"}})],1),a("v-col",{attrs:{cols:"12",lg:"4"}},[a("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"card"}})],1)],1)},q=[],z=(a("4e827"),a("fb6a"),function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.loading=!0,t.sample=null,t}return Object(i["a"])(a,[{key:"watchResult",value:function(t){this.processResult(t)}},{key:"processResult",value:function(t){if(this.loading=!0,!t||!t.length)return this.sample=null,void(this.loading=!1);var e=t.slice().sort((function(t,e){var a=0;return t.msm_id&&!e.msm_id?a--:!t.msm_id&&e.msm_id&&a++,t.msm_name&&!e.msm_name?a--:!t.msm_name&&e.msm_name&&a++,t.dst_addr&&!e.dst_addr?a--:!t.dst_addr&&e.dst_addr&&a++,t.dst_port&&!e.dst_port?a--:!t.dst_port&&e.dst_port&&a++,t.type&&!e.type?a--:!t.type&&e.type&&a++,a}));this.loading=!1,this.sample=e[0],console.log(this.sample)}}]),a}(u["e"]));Object(d["a"])([Object(u["c"])(Array)],z.prototype,"result",void 0),Object(d["a"])([Object(u["f"])("result",{immediate:!0})],z.prototype,"watchResult",null),z=Object(d["a"])([u["a"]],z);var G=z,K=G,Y=a("1f4f"),Z=a("3129"),Q=Object(h["a"])(K,U,q,!1,null,null,null),W=Q.exports;k()(Q,{VCol:A["a"],VRow:L["a"],VSimpleTable:Y["a"],VSkeletonLoader:Z["a"]});var X=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.name="App",t.tab="upload",t.loading=!1,t.progress=0,t.snackbarData={show:!1,message:null,color:null},t.result=null,t}return Object(i["a"])(a,[{key:"progressText",get:function(){return this.formatBytes(this.progress)}},{key:"watchResult",value:function(){this.progress=0}},{key:"snackbar",value:function(t,e){this.snackbarData={show:!0,message:t,color:e}}},{key:"onLoad",value:function(t){t?t.length||this.snackbar("Nenhuma entrada encontrada"):this.snackbar("Algo deu errado ao carregar os resultados"),this.result=t}},{key:"onUnload",value:function(){this.result=null}},{key:"onProgress",value:function(t){this.progress=t}},{key:"formatBytes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===t)return"0 Bytes";var a=1024,r=e<0?0:e,o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],n=Math.floor(Math.log(t)/Math.log(a));return parseFloat((t/Math.pow(a,n)).toFixed(r))+" "+o[n]}}]),a}(u["e"]);Object(d["a"])([Object(u["f"])("result")],X.prototype,"watchResult",null),Object(d["a"])([Object(u["d"])()],X.prototype,"snackbar",null),X=Object(d["a"])([Object(u["a"])({components:{AppUploader:w,AppFetcher:H,AppSummary:W},provide:function(){return{snackbar:this.showSnack}}})],X);var tt=X,et=tt,at=(a("492c"),a("7496")),rt=a("40dc"),ot=a("b0af"),nt=a("99d9"),st=a("a523"),it=a("ce7e"),lt=a("0789"),ct=a("553a"),dt=a("f6c4"),ut=a("2db4"),pt=a("2fa4"),vt=a("71a3"),mt=a("c671"),ft=a("fe57"),bt=a("aac8"),ht=a("2a7f"),gt=Object(h["a"])(et,o,n,!1,null,"8a957126",null),kt=gt.exports;k()(gt,{VApp:at["a"],VAppBar:rt["a"],VBtn:y["a"],VCard:ot["a"],VCardText:nt["b"],VCol:A["a"],VContainer:st["a"],VDivider:it["a"],VFadeTransition:lt["b"],VFooter:ct["a"],VIcon:x["a"],VMain:dt["a"],VProgressCircular:$["a"],VRow:L["a"],VSnackbar:ut["a"],VSpacer:pt["a"],VTab:vt["a"],VTabItem:mt["a"],VTabs:ft["a"],VTabsItems:bt["a"],VToolbarTitle:ht["a"],VTooltip:O["a"]});var yt=a("f309"),_t=a("fcf4");r["a"].use(yt["a"]);var xt=new yt["a"]({icons:{iconfont:"mdi"},theme:{dark:!0,themes:{dark:{primary:_t["a"].green}}}}),Ot=a("ad24");r["a"].use(Ot["a"]);var jt=a("b6d0");r["a"].directive("mask",jt["a"]),r["a"].config.productionTip=!1,new r["a"]({vuetify:xt,render:function(t){return t(kt)}}).$mount("#app")}});
//# sourceMappingURL=index.e508cbd2.js.map